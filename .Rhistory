}
AA <- data.frame(place = character(712),
adrs = character(712))
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)] <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
AA <- data.frame(place = character(724),
adrs = character(724))
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)] <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)+1] <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
AA[1]
AA[1:12]
AA[1:12,1:2]
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)+1:12*i,1:2] <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
View(AA)
AA <- data.frame(place = numeric(698),
adrs = numeric(698))
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)+1:12*i,1:2] <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
AA <- data.frame(place = numeric(698),
adrs = numeric(698))
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA[12*(i-1)+1:12*i,1:2] <- data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres)
}
AA[1:12,1:2]
AA[1:12,1:2] <- data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres)
View(AA)
AA <- data.frame(place = character(698),
adrs = character(698))
AA[1:12,1:2] <- data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres)
View(httpResponse0)
View(httpResponse1)
View(httpResponse1)
AA <- data.frame(place = character(0),
adrs = character(0))
View(AA)
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
rm(i)
AA <- data.frame(place = character(0),
adrs = character(0))
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
AA <- NULL
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
AA <- NULL
for (i in 1:2) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
AA <- NULL
for (i in 1) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
for (i in 2:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
for (i in 1) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
}
View(AA)
for (i in 2:3) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
print(i)
}
AA <- NULL
for (i in 1:5) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
print(i)
}
AA <- NULL
print("i/59")
for (i in 1:5) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
print("i/59")
}
AA <- NULL
for (i in 1:5) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
print(i"/59")
}
for (i in 1:5) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
print(i"/59")
}
cat(i,"/59")
cat(i,"/59",sep = "")
AA <- NULL
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
cat(i,"/59",sep = "")
}
AA <- NULL
for (i in 1:59) {
httpResponse0 <- GET(url = paste0("http://korean.visitseoul.net/attractions",
"?curPage=",i),accept_json())
httpResponse1 <- fromJSON(content(httpResponse0,"text"))
AA <- rbind(AA,data.frame(place = httpResponse1$listVO$listObject$postSj,
adrs = httpResponse1$listVO$listObject$adres))
cat(i,"/59","\n",sep = "")
}
View(AA)
View(AA)
library(ggplot2)
library(reshape2)
library(rgeos)
library(maptools)
library(raster)
AA0 <- AA %>%
na.omit() %>%
regmatches(.[,2],regexpr("[가-힣]+(구)",.[,2])) %>%
as.data.frame(table())
AA0 <- AA %>%
na.omit() %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs)) %>%
as.data.frame(table())
AA0 <- AA %>%
na.omit() %>%
regmatches(.,regexpr("[가-힣]+(구)",.)) %>%
as.data.frame(table())
AA0 <- AA %>%
na.omit() %>%
regmatches(.,regexpr("[가-힣]+(구)",.)) %>%
table %>%
as.data.frame()
View(AA0)
AA0 <- AA %>%
na.omit()
AA0 <- AA %>%
na.omit() %>%
regmatches(.,regexpr("[가-힣]+(구)",.))
AA0 <- AA %>%
na.omit() %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs))
AA0 <- AA %>%
na.omit()
AA1 <- AA0 %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs)) %>%
table %>%
as.data.frame()
AA1 <- AA0 %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs))
View(AA0)
AA0 <- AA %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs))
View(AA0)
AA1 <- AA0 %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",`[`c(,2)))
AA1 <- AA0 %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs))
regexpr("[가-힣]+(구)",.$adrs)
regexpr("[가-힣]+(구)",AA0$adrs)
length(regexpr("[가-힣]+(구)",AA0$adrs))
AA1 <- AA0 %>%
regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs))
legnth(AA0$adrs)
length(AA0$adrs)
length(regexpr("[가-힣]+(구)",AA0$adrs))
AA1 <- AA0 %>%
regmatches(.,regexpr("[가-힣]+(구)",AA0$adrs))
AA1 <- AA0 %>%
regmatches(.$adrs,regexpr("[가-힣]+(구)",.$adrs))
AA1 <- AA0 %>%
regmatches(x = .$adrs,regexpr("[가-힣]+(구)",.$adrs))
AA1 <- AA0 %>%
regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs))
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs))
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs)) %>%
table
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs)) %>%
table %>%
as.data.frame()
View(AA1)
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs)) %>%
table %>%
as.data.frame(row.names = c("Var1","Freq"))
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs)) %>%
table %>%
as.data.frame(cow.names = c("Var1","Freq"))
View(AA1)
AA1 <- regmatches(AA0$adrs,regexpr("[가-힣]+(구)",AA0$adrs)) %>%
table %>%
as.data.frame() %>%
`colnames<-`(c("Var1","Freq"))
write.csv(AA1,"../doc/AA2.csv")
write.csv(AA1,"../doc/AA2.csv)
""
AA
1
i
askldnfa
d
write.csv(AA1,"../doc/AA2.csv")
getwd()
write.csv(AA1,"doc/AA2.csv")
A1 <- read_xlsx("../doc/관광지.xlsx.")
A2 <- as.data.frame(table(A1$`행정 구`))
#write.csv(A2,"../doc/12.csv")
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
A4 <- AA1
##GGMAP
#seoulm <- get_map('seoul',zoom=12,maptype = 'roadmap',color = "bw")
#seoulm_1 <-ggmap(seoulm,legend ='none') +
#  geom_point(aes(x = lon, y = lat),
#             size = 15,color="skyblue",alpha = 0.8, data = A4) +
#  annotate("text",x=A4$lon,y=A4$lat,label = plotlab,
#           size=5,color="white")
#seoulm_1
seoul <- shapefile("../data/TL_SCCO_SIG.shp")
seoul <- spTransform(seoul,CRS("+proj=longlat"))
seoul_map <- fortify(seoul)
merge_result <- merge(A3,seoul_map,by="id")
#ggplot() +
#  geom_polygon(data = merge_result,
#               aes(x=long,y=lat,group=group,fill = Freq)) +
#  coord_cartesian(xlim=c(126.75,127.22),
#                  ylim=c(37.42,37.705)) +
#  scale_fill_gradient(low = '#90E4FF',high='#1266FF',na.value = "white")
A1 <- read_xlsx("../doc/관광지.xlsx.")
A2 <- as.data.frame(table(A1$`행정 구`))
#write.csv(A2,"../doc/12.csv")
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
A4 <- AA1
##GGMAP
#seoulm <- get_map('seoul',zoom=12,maptype = 'roadmap',color = "bw")
#seoulm_1 <-ggmap(seoulm,legend ='none') +
#  geom_point(aes(x = lon, y = lat),
#             size = 15,color="skyblue",alpha = 0.8, data = A4) +
#  annotate("text",x=A4$lon,y=A4$lat,label = plotlab,
#           size=5,color="white")
#seoulm_1
A1 <- read_xlsx("../doc/관광지.xlsx.")
A2 <- as.data.frame(table(A1$`행정 구`))
#write.csv(A2,"../doc/12.csv")
#SET LOCALE ID
A3 <- read.csv("doc/AA2.csv.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
A4 <- AA1
##GGMAP
#seoulm <- get_map('seoul',zoom=12,maptype = 'roadmap',color = "bw")
#seoulm_1 <-ggmap(seoulm,legend ='none') +
#  geom_point(aes(x = lon, y = lat),
#             size = 15,color="skyblue",alpha = 0.8, data = A4) +
#  annotate("text",x=A4$lon,y=A4$lat,label = plotlab,
#           size=5,color="white")
#seoulm_1
setwd("R/")
A1 <- read_xlsx("../doc/관광지.xlsx.")
A2 <- as.data.frame(table(A1$`행정 구`))
#write.csv(A2,"../doc/12.csv")
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
A4 <- AA1
##GGMAP
#seoulm <- get_map('seoul',zoom=12,maptype = 'roadmap',color = "bw")
#seoulm_1 <-ggmap(seoulm,legend ='none') +
#  geom_point(aes(x = lon, y = lat),
#             size = 15,color="skyblue",alpha = 0.8, data = A4) +
#  annotate("text",x=A4$lon,y=A4$lat,label = plotlab,
#           size=5,color="white")
#seoulm_1
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv.csv")
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv.csv")
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
#SET LOCALE ID
A3 <- read.csv("../doc/AA2.csv")
A3_1 <- data.frame(Var1 = NA,
Freq = NA,
id = 25:249)
A3 <- rbind(A3,A3_1)
A4 <- AA1
seoul <- shapefile("../data/TL_SCCO_SIG.shp")
seoul <- spTransform(seoul,CRS("+proj=longlat"))
seoul_map <- fortify(seoul)
merge_result <- merge(A3,seoul_map,by="id")
#ggplot() +
#  geom_polygon(data = merge_result,
#               aes(x=long,y=lat,group=group,fill = Freq)) +
#  coord_cartesian(xlim=c(126.75,127.22),
#                  ylim=c(37.42,37.705)) +
#  scale_fill_gradient(low = '#90E4FF',high='#1266FF',na.value = "white")
getgeocode <- GET(url =
paste0("https://api.bigdatahub.co.kr/v1/datahub/datasets/search.json?pid=1000908",
"&$count=25"),
add_headers(TDCAccessKey='*SKT_APIKEY*'),
accept_json())
getapi_data = fromJSON(content(getgeocode, "text"))
geocode_center <- getapi_data$entry[-1]
geocode_center$경도 <- as.numeric(geocode_center$경도)
geocode_center$위도 <- as.numeric(geocode_center$위도)
View(geocode_center)
getgeocode <- GET(url =
paste0("https://api.bigdatahub.co.kr/v1/datahub/datasets/search.json?pid=1000908",
"&$count=25"),
add_headers(TDCAccessKey='55c155bca4d4ec0e16d51838827125e3f5906f9846db003df03d5f7fd2a7edba'),
accept_json())
getapi_data = fromJSON(content(getgeocode, "text"))
geocode_center <- getapi_data$entry[-1]
geocode_center$경도 <- as.numeric(geocode_center$경도)
geocode_center$위도 <- as.numeric(geocode_center$위도)
#SET GEOCODE_CENTER
A4 <- merge(A4,geocode_center,by.x = "Var1",by.y="구")
#CIRCLE
plotlab <- paste0(A2$Var1,"\n",A2$Freq)
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="skyblue",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
A4 <- AA1
A4 <- read.csv("../doc/AA2.csv")
#SET GEOCODE_CENTER
A4 <- merge(A4,geocode_center,by.x = "Var1",by.y="구")
#CIRCLE
plotlab <- paste0(A2$Var1,"\n",A2$Freq)
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="skyblue",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
A2 <- read.csv("../doc/AA2.csv")
#SET GEOCODE_CENTER
A4 <- merge(A4,geocode_center,by.x = "Var1",by.y="구")
#CIRCLE
plotlab <- paste0(A2$Var1,"\n",A2$Freq)
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="skyblue",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
View(A4)
rm(A4)
A4 <- read.csv("../doc/AA2.csv")
#SET GEOCODE_CENTER
A4 <- merge(A4,geocode_center,by.x = "Var1",by.y="구")
#CIRCLE
plotlab <- paste0(A4$Var1,"\n",A4$Freq)
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="skyblue",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="#12EAFF",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
ggplot() +
geom_polygon(data = merge_result,
aes(x=long,y=lat,group=group,fill = Freq),colour = "white",size=0.8,
show.legend = F) +
coord_cartesian(xlim=c(126.75,127.22),
ylim=c(37.42,37.705)) +
scale_fill_gradient(low = '#90E4FF',high='#90E4FF',na.value = "white") +
theme_void() +
geom_point(aes(x = 경도, y = 위도),
size = 15,color="#00C6ED",alpha = 1, data = A4) +
annotate("text",x=A4$경도,y=A4$위도,label = plotlab,
size=3,color="white")
